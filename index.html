<!doctype html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="css/jquery.fullPage.css" />
    <link rel="stylesheet" type="text/css" href="css/presentation.css" />
    <title>Reactive SVG charts with Ractive.js</title>
  </head>
  <body>
    <div id="fullpage">
      <div class="section " id="section0">
        <div class="intro">
          <h1>Reactive SVG charts with Ractive.js</h1>
          <h3>Applying MVC pattern to Data Visualization</h3>
          <h4>author: Marcello La Rocca - Data Visualization Engineer @ <a href="http://www.swiftiq.com/">SwiftIQ</a></h4> 
        </div>
      </div>
      <div class="section" id="section1">
        <div class="intro">
          <h1>Index</h1>
          <ul>
              <li>Data Visualization in Summary</li>
              <li>An Overview of Visualization Libraries</li>
              <li>Declarative Frameworks</li>
              <li>MVC Visualization Libraries</li>
              <li>A Comparative Example
                  <ul>
                    <li>Description</li>
                    <li>Implementation with D3</li>
                    <li>Implementation with Ractive</li>
                  </ul>
              </li>
              <li>PathsJs</li>
              <li>Conclusions</li>
          </ul>
        </div>
      </div>      


      <div class="section" id="section2">
        <div class="slide" id="slide_2_1" data-anchor="slide_2_1">
          <div class="intro">
            <h1>Data Visualization in Summary</h1>
              <h4>Demand for data visualization is costantly growing, such that companies can't afford ignoring it anymore to stay in the market.</h4>
              <h4>While in-house solutions can be tempting, there are good off-the-shelf solutions available as well.</h4>
          </div>
        </div>

        <div class="slide" id="slide_2_2" data-anchor="slide_2_2">
          <p>As the amount of data produced and made available on the web by social interactions and ecommerce grows larger and larger, structuring and visualizing these data in meaningful (and human-friendly) ways becomes increasingly crucial.
            <br>
            The amount of data generated grows exponentially every year, such that in late 2013 it was estimated that 90% of world's data had been generated over the previous two years; companies faces an arm-race to make sense of this flood of information, which can easily make the difference between understanding the market or going out of business. 
            <br>
            While most companies easily cope with collecting data (from clicks, visits, purchases, applications' logs etc...), not all of them are able to transform the information into knowledge (or at least valuable indications). The result is that gathering terabytes of information is pointless if then we don't have efficient way to summarize and visualize it - in a few word, extracting meaning from the mere information.
        </div>

        <div class="slide" id="slide_2_3" data-anchor="slide_2_3">
          <p>
          In the last few years both IT giants like Google (with Google Analytics) and startups have turned their attention to this increasing demand for data-visualization tools. A new market segment has indeed thrived around this idea, with mainly two kind of products: </p>
          <ol>
            <li>Off-the-shelf solutions, tools that users can either use
              <ul>
                <li>to see a commprehensive but static set of views about the data they gathered/generated (Google Analytics itself could be an example)</li>
                <li>or to create customizable (up to a certain point) charts to visualize their data (HighChart is a good example).</li>
              </ul>
            </li>
            <li>
              Customized solutions, ad-hoc tailored for specific clients - usually these solutions change over time, and they also include continuous support for clients.
              <a href="http://www.swiftiq.com/">SwiftIQ</a> is a good example of such a company.
            </li>
          </ol>
          <br>
          <p>The alternative to such products would be, of course, in-house developments of such tools - but that's often too costly for start-ups or small companies.
          <br>
          Either if you need to develop charts on your own or if you are a company that offers in data-visualization as a service, you'll need to build your work upon a chart library - and hopefully a good one too.
          </p>
        </div>        
      </div>


      <div class="section" id="section3">
        <div class="slide" id="slide_3_1" data-anchor="slide_3_1">
          <div class="intro">
            <h1>An Overview of Visualization Libraries</h1>
            <h4>
              There are a few good, open source chart libraries out there that helps developers integrating charts and visualization solutions in web applications.
            </h4>
            <h4>Most of them are based on imperative programming, almost all of them uses SVG over HTML5: let's see which and why</h4>
            </h4>
          </div>
        </div>

        <div class="slide" id="slide_3_2" data-anchor="slide_3_2">
          <p>Among the vast offer of libraries for data visualization, the first big distinction can be made between HTML5 libraries and SVG libraries.
          </p>
          <ul>
            <li><b>HTML5</b> solutions uses the Canvas object, introduced in HTML5, to draw the shapes (or images) in the chart.</li>
            <li><b>SVG</b> solutions uses the Scalable Vector Graphic format, a markup language derived from XML that is supported by all browsers. Current version is 1.1 (technically 1.2, but no new features were introduced), but version 2 of SVG specifications is about to be released. </li>
          </ul> 
          <p>SVG and HTML5 solutions, as you would expect, have some Pros and Cons; oversimplyfying we could say that:</p>
          <ul>
            <li>SVG is a vector-based format, which means each drawn shape is an actual object added to the DOM. This means that the same shape or complex drawing can be ported to different devices and screen sizes without any noticeable loss of quality; also, being each shape an object of its own, if an attribute of an SVG object is changed, the browser can automatically update the view by re-rendering the corresponding node.
            </li>
            <li>Canvas is raster-based, so resizing the image created will produce pixelation or loss of details, and to reposition or change color to a shape, the whole scene needs to be redrawn. (However, layers can be created, such that only the layer containing a particular object needs to be redrawn)
            </li>
            <li>While it is possible to add an event listener to SVG elements, for Canvas shapes it is not: the behaviour of mouse clicks, for example, must be associated with single pixels on the canvas rather than shapes.
            </li>
            <li>On the other hand, when lots of elements are drawn to a SVG chart, every one of them is added to the DOM, even if it is not visible. In charts with tens of thousands elements shown, SVG solutions don't scale well.
            </li>
            <li>Also, Canvas are great to draw raster images and creates sprites, while in SVG it is simply not possible.</li>
          </ul>
          <p>All things considered, since rarely you do need to insert more than a few hundreds shapes in a single chart (and if you do you might want to revisit yur design), so far SVG has been the mainstream technology for data visualization.</p>
        </div>

        <div class="slide" id="slide_3_3" data-anchor="slide_3_3">
          <h3>HTML5 solutions</h3>
          <p>
          Probably the most famous example of a chart library using this solution is <a href="http://www.chartjs.org/">ChartJs</a>.
          <br>Another interesting library to manipulate shapes in the Canvas is <a href="http://fabricjs.com/"/>FabricJs</a>.
          </p>
        </div>    
        <div class="slide" id="slide_3_4" data-anchor="slide_3_4">
          <h3>SVG solutions</h3>
          <ul>
            <li><b><a href='http://d3js.org/'>D3.js</a></b> is a data-driven, SVG-oriented visualization library created in 2011 at Standford, and brought on as an open source project. 
                    As of today, it is probably the most widely adopted and the one with the highest number of plugins and extension.
                    In D3 the data-binding and the presentation are embedded in the logic (JavaScript) part.
                    <br><b>+</b> You can find extensions or examples for almost any kind of chart you might want to create
                    <br><b>+</b> Data binding native support
                    <br><b>+</b> Well documented 
                    <br><b>-</b> Data binding in JavaScript might not be very intuitive for complicated graphs
                    <br><b>-</b> Performance is sometimes an issue, and some popular extensions are prone to memory leaks
                    </li>
            <li><b><a href="http://raphaeljs.com/">Raphael</a></b> provides a set of primitives for vector-based graphics in the browser supporting SVG and VML, created by Dmitry Baranovskiy as a personal project.
                <br><b><a href="http://g.raphaeljs.com/">gRaphael</a></b> is a charting library built upon Raphael.
                    <br><b>+</b> A rich set of low level primitives for drawing SVG
                    <br><b>+</b> Very good performance and appearance
                    <br><b>+</b> Great for animations
                    <br><b>-</b> Doesn't support data binding by itself
                    <br><b>-</b> Not many examples and charts available on the Net
              </li>
            <li><b>Snap.svg</b> is the evolution of Raphael: it's designed for modern browsers, by giving up compatibility with obsolete browsers it supports the newest SVG features like masking, clipping, patterns, full gradients, groups, etc...
                    <br><b>+</b> Great for SVG drawing
                    <br><b>+</b> Amazing look thanks to the newset features
                    <br><b>+</b> Can work with and animate existing SVG (like jQuery with existing HTML)
                    <br><b>-</b> It's a low level library, no support even for charts yet, let alone data-binding
                    <br><b>-</b> The project has not reached full maturity yet
            </li>
            <li>Template based solutions... (more in next section)</li>
          </ul>
        </div>
      </div>



      <div class="section" id="section4">
        <div class="slide" id="slide_4_1" data-anchor="slide_4_1">
          <div class="intro">
            <h1>Declarative Frameworks</h1>
            <h4>
                As we saw, D3.js supports data-binding, so that your charts can be configured such that they will update as the data to be shown change.
                <br>
                Updates, however, must be manually triggered by developers every time they feel their data might have changed, and the update mechanism
                must be set in stone esplicitely in the code by providing callbacks to be invoked for datapoints entering and exiting the dataset associated with the graph.
                <br>
                Declarative frameworks also provide primitives for data-binding and not just for SVG: any DOM element can be associated with data and kept in sync with it.
                <br>The difference is that the binding happens using templates in the presentation (the HTML markup) and that the presentation is updated automatically every time the data behind it changes.
            </h4>
          </div>
        </div>

        <div class="slide" id="slide_4_2" data-anchor="slide_4_2">
            <h4>The added value of these frameworks can be identified in a few key points:
                <ul>
                    <li>They enforce a greather degree of separation between content and presentation, by letting you bind in the presentation layer data, event handlers and even structure of the view (like for iterative and composite objects, for example tables).</li>
                    <li>They provide an easy way to keep your data model and your presentation in sync</li>
                    <li>They generally do it in an extremely efficient way, making sure to reflow only the minimum possible subset of your DOM tree (and keep in mind that reflowing and repainting are usually bottlenecks for client-side browser applications)</li>
                </ul> 
            </h4>
        </div>

        <div class="slide" id="slide_4_3" data-anchor="slide_4_3">
            <h4>The synchronization between data and DOM is obtained with different strategies, but mainly two kinds of techniques are employed:
                <ol>
                  <li><b>Dirty Checking</b> (<a href="https://angularjs.org/">Angular</a>) - Behind the scenes, the framework runs a digest cycle, and during each iteration, a deep comparison on all the Models that are presently displayed within the view is preformed. If a difference is detected, and the data changed is bound to any element, all the element relaying on those data are either notified or directly updated (depending on the implementation).</li>
                  <li><b>Container objects</b> (<a href="http://www.ractivejs.org/">Ractive</a>, <a href="http://facebook.github.io/react/">React</a>, <a href="http://emberjs.com/">Ember</a>) the framework creates objects which wraps around the data; these objects have accessors to the data and so every time you set or get any property the framework can capture your action and internally broadcast it to all the subscribers.</li>
                </ol>
            </h4>
        </div>
        <div class="slide" id="slide_4_4" data-anchor="slide_4_4">            
            <h3>While dirty checking will likely become computationally intensive as the number of watched objects grow, container objects make integration with external code more difficult. Moreover, the introduction of <i>Object.observe()</i> in <a href="http://kangax.github.io/compat-table/es7/">ES7</a> (already supported in Chrome 36) will cut the overhead for dirty checking.
            </h3>
        </div>      

      </div>



      <div class="section" id="section5">
        <div class="slide" id="slide_5_1" data-anchor="slide_5_1">
          <div class="intro">
            <h1>MVC Visualization Libraries
            </h1>
            <h3>
              As we saw, D3js introduces the concept of data-binding for SVG-based chart libraries.
              <br>
              This binding, however, has to take place in the logic layer: since you also have to specify the structure and composition of your chart in JS, you are actually moving part of your presentation inside the logic.
              <br>
              As we strive for greater separation, we look to Declarative Frameworks data-binding features to enforce the MVC pattern.
              <br>
              If only there were SVG libraries to use on top of these frameworks...
            </h3>
          </div>
        </div>
        <div class="slide" id="slide_5_2" data-anchor="slide_5_2">
          <div class="intro">
            <h3>... Turns out, there are ...</h3>
            <h4>
                <ul>
                    <li><b><a href="https://github.com/andreaferretti/paths-js">PathsJs</a></b> Paths.js is a minimal library by Andrea Ferretti that is, explicitly and by design, oriented to support reactive programming by generating SVG paths that can be used with template engines. It offers three API levels, of increasing abstraction. The lowest level is a chainable API to generate an arbitrary SVG path. On top of this, paths for simple geometric shapes such as polygons or circle sectors are defined. At the highest level, there is an API to generate some simple graphs (pie, line chart, radar...) for a collection of data, assembling the simple shapes.
                    </li>
                    <li><b><a href="https://github.com/n3-charts">n3-charts</a></b> is a visualization library specifically designed to be used in conjunction with Angular. At the moment, they only offer line-charts, bar-charts and pie-charts. The API is only high-level but the quality of the graphics is very good.</li>
                </ul>
            </h4>
          </div>
        </div>
        <div class="slide" id="slide_5_3" data-anchor="slide_5_23">
          <div class="intro">
            <h3>... but you don't even need them!</h3>
            <h4>
                So, you can use can draw complete charts using n3-charts or PathsJs' highest level API.
                <br>Or you can use the low lovel APIs of PathsJs to generate SCG paths or shapes from your data, and bind those objects to your view
                <br>
                But in the end, you can do just fine without either: using Ractive or React alone, for example, you can easily and smartly iterate over a collection of objects in-line in the HTML, and associate SVG elements (bars, lines, circles etc...) with each data-point. Add some CSS-styling, and your MVC-compliant chart is ready.
            </h4>
          </div>
        </div>        
      </div>
    </div>

    <script src="js/lib/jquery-1.11.1.min.js"></script>

    <!-- This following line is needed in case of using the default easing option or when using another
     one rather than "linear" or "swing". You can also add the full jQuery UI instead of this file if you prefer -->
    <script src="js/lib/fullpage/vendors/jquery.easings.min.js"></script>


    <!-- This following line needed in the case of using the plugin option `scrollOverflow:true` -->
    <script type="application/javascript" src="js/lib/fullpage/vendors/jquery.slimscroll.min.js"></script>

    <script type="application/javascript" src="js/lib/fullpage/jquery.fullPage.min.js"></script>
    <script type="application/javascript" src="js/presentation.js"></script>
  </body>
</html>